import { trigger, state, style, transition, animate, } from '@angular/animations';
import { Component, ElementRef, Input, Renderer2, ViewChild, ViewEncapsulation, } from '@angular/core';
export class ModalComponent {
    // @Input() fade: boolean = true;
    // @Input() autoFocus: boolean = true;
    // @Input() backdrop: boolean = true; No need for this since disableBackdrop is available
    // @Input() backdropTransitionTimeout: number = 150 Not applicable because of angular animations;
    // @Input() cascading: boolean;
    // @Input() disableFocusTrap: boolean = true;
    // @Input() frame: boolean;
    // @Input() fullHeight: boolean;
    // @Input() id: string;
    // @Input() inline: boolean;
    // @Input() modalStylesWithoutBackdrop: object;
    // @Input() modalTransitionTimeout: number = 300; Not applicable because of angular animations
    // @Input() noClickableBodyWithoutBackdrop: boolean = false;
    // @Input() overflowScroll: boolean = true;
    // @Input() side: boolean;
    constructor(elRef, renderer) {
        this.elRef = elRef;
        this.renderer = renderer;
        this.centered = false;
        this.isOpen = false;
        this.position = 'center';
        this.disableBackdrop = false;
        this.animation = 'top';
        this.keyboard = true;
    }
    ngOnInit() {
        this.renderer.removeAttribute(this.elRef.nativeElement, 'class');
        this.renderer.removeAttribute(this.elRef.nativeElement, 'style');
        if (this.isOpen === true) {
            this.modalAnimationState = 'visible';
        }
        else {
            this.modalAnimationState = 'hidden';
        }
    }
    ngAfterViewInit() {
        if (this.isOpen === true) {
            this.renderer.addClass(this.modalContainer.nativeElement, 'd-block');
        }
        if (this.centered === true) {
            this.renderer.addClass(this.modalContainerInner.nativeElement, 'modal-dialog-centered');
        }
        if (this.position === 'center') {
            this.renderer.addClass(this.modalContainerInner.nativeElement, 'modal-center');
        }
        else {
            this.renderer.addClass(this.modalContainerInner.nativeElement, 'modal-side');
        }
        if (this.position === 'top-left') {
            this.renderer.addClass(this.modalContainerInner.nativeElement, 'modal-top-left');
        }
        if (this.position === 'top-right') {
            this.renderer.addClass(this.modalContainerInner.nativeElement, 'modal-top-right');
        }
        if (this.position === 'bottom-left') {
            this.renderer.addClass(this.modalContainerInner.nativeElement, 'modal-bottom-left');
        }
        if (this.position === 'bottom-right') {
            this.renderer.addClass(this.modalContainerInner.nativeElement, 'modal-bottom-right');
        }
        if (this.size) {
            this.renderer.addClass(this.modalContainerInner.nativeElement, `modal-${this.size}`);
        }
        window.addEventListener('keydown', (event) => {
            if (this.keyboard === true && event.keyCode === 27) {
                event.preventDefault();
                this.closeModal();
            }
        });
    }
    toggleModal() {
        if (this.isOpen === true) {
            this.closeModal();
        }
        else {
            this.renderer.addClass(this.modalContainer.nativeElement, 'd-block');
            this.modalAnimationState = 'visible';
            this.isOpen = true;
        }
    }
    closeModal() {
        this.modalAnimationState = 'hidden';
        this.isOpen = false;
        setTimeout(() => {
            this.renderer.removeClass(this.modalContainer.nativeElement, 'd-block');
        }, 300);
    }
}
ModalComponent.decorators = [
    { type: Component, args: [{
                selector: 'CDBModal',
                exportAs: 'cdbModal',
                template: "<div *ngIf=\"isOpen === true && disableBackdrop === false\" #modalBackdrop class=\"modal-backdrop show {{ backdropClass }}\"\n    [style]=\"backdropStyle\"></div>\n\n<div #modalContainer class=\"modal show {{ wrapperClass }}\" [style]=\"wrapperStyle\" tabindex=\"-1\" role=\"dialog\">\n    <div #modalContainerInner class=\"modal-dialog {{ modalClass }}\" [style]=\"modalStyle\" role=\"document\">\n\n        <ng-container [ngSwitch]=\"animation\">\n\n            <ng-container *ngSwitchCase=\"'top'\">\n                <div #modalContent [@top]=\"modalAnimationState\" class=\"modal-content {{ class }} {{ contentClass }}\">\n                    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n                </div>\n            </ng-container>\n\n            <ng-container *ngSwitchCase=\"'bottom'\">\n                <div #modalContent [@bottom]=\"modalAnimationState\" class=\"modal-content {{ class }} {{ contentClass }}\">\n                    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n                </div>\n            </ng-container>\n\n            <ng-container *ngSwitchCase=\"'left'\">\n                <div #modalContent [@left]=\"modalAnimationState\" class=\"modal-content {{ class }} {{ contentClass }}\">\n                    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n                </div>\n            </ng-container>\n\n            <ng-container *ngSwitchCase=\"'right'\">\n                <div #modalContent [@right]=\"modalAnimationState\" class=\"modal-content {{ class }} {{ contentClass }}\">\n                    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n                </div>\n            </ng-container>\n\n        </ng-container>\n\n    </div>\n</div>\n\n<ng-template #content>\n    <ng-content></ng-content>\n</ng-template>",
                animations: [
                    trigger('top', [
                        state('hidden', style({ transform: 'translateY(-100px)', opacity: 0 })),
                        state('visible', style({ transform: 'translateY(0)', opacity: 1 })),
                        transition('hidden => visible', [
                            animate('500ms ease', style({ transform: 'translateY(0)', opacity: 1 })),
                        ]),
                        transition('visible => hidden', [
                            animate('500ms ease', style({ transform: 'translateY(-100px)', opacity: 0 })),
                        ]),
                    ]),
                    trigger('bottom', [
                        state('hidden', style({ transform: 'translateY(100px)', opacity: 0 })),
                        state('visible', style({ transform: 'translateY(0)', opacity: 1 })),
                        transition('hidden => visible', [
                            animate('500ms ease', style({ transform: 'translateY(0)', opacity: 1 })),
                        ]),
                        transition('visible => hidden', [
                            animate('500ms ease', style({ transform: 'translateY(100px)', opacity: 0 })),
                        ]),
                    ]),
                    trigger('left', [
                        state('hidden', style({ transform: 'translateX(-100px)', opacity: 0 })),
                        state('visible', style({ transform: 'translateX(0)', opacity: 1 })),
                        transition('hidden => visible', [
                            animate('500ms ease', style({ transform: 'translateX(0)', opacity: 1 })),
                        ]),
                        transition('visible => hidden', [
                            animate('500ms ease', style({ transform: 'translateX(-100px)', opacity: 0 })),
                        ]),
                    ]),
                    trigger('right', [
                        state('hidden', style({ transform: 'translateX(100px)', opacity: 0 })),
                        state('visible', style({ transform: 'translateX(0)', opacity: 1 })),
                        transition('hidden => visible', [
                            animate('500ms ease', style({ transform: 'translateX(0)', opacity: 1 })),
                        ]),
                        transition('visible => hidden', [
                            animate('500ms ease', style({ transform: 'translateX(100px)', opacity: 0 })),
                        ]),
                    ]),
                ],
                encapsulation: ViewEncapsulation.None,
                styles: [".primary{background-color:#276ef1;border-color:#276ef1;box-sizing:border-box;color:#fff}.primary:hover{background-color:rgba(39,110,241,.7411764705882353);color:#fff}.secondary{background-color:#7356bf;border-color:#7356bf;color:#fff}.secondary:hover{background-color:rgba(115,86,191,.7411764705882353);color:#fff}.success{background-color:#05944f;border-color:#05944f;color:#fff}.success:hover{background-color:rgba(5,148,79,.7411764705882353);color:#fff}.danger{background-color:#e11900;border-color:#e11900;color:#fff}.danger:hover{background-color:rgba(225,25,0,.7411764705882353);color:#fff}.warning{background-color:#ffe975;border-color:#ffe975;color:#66512c}.warning:hover{background-color:rgba(255,233,117,.7411764705882353);color:#66512c}.dark{background-color:#000;border-color:#000;color:#fff}.dark:hover{background-color:rgba(0,0,0,.7411764705882353);color:#fff}.light{background-color:#eee;border-color:#eee;color:#000}.light:hover{background-color:hsla(0,0%,93.3%,.7411764705882353);color:#000}.white{background-color:#fff;border-color:#fff;color:#000}.white:hover{background-color:hsla(0,0%,100%,.8352941176470589);color:#000}.info{background-color:#17a2b8;border-color:#17a2b8;color:#fff}.info:hover{background-color:rgba(23,162,184,.7411764705882353);color:#fff}.modal{overflow-y:auto}.modal-dialog .modal-content{border:0;border-radius:.125rem;box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15)}.modal-dialog .modal-content .modal-header{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.modal-dialog.cascading-modal{margin-top:10%}.modal-dialog.cascading-modal .close{color:#fff;opacity:1;outline:0;text-shadow:none}.modal-dialog.cascading-modal .modal-header{border:none;border-radius:.125rem;box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);margin:-2rem 1rem 1rem;padding:1.5rem;text-align:center}.modal-dialog.cascading-modal .modal-header .close{margin-right:1rem}.modal-dialog.cascading-modal .modal-header .title{font-size:1.25rem;margin-bottom:0;width:100%}.modal-dialog.cascading-modal .modal-header .title .fab,.modal-dialog.cascading-modal .modal-header .title .far,.modal-dialog.cascading-modal .modal-header .title .fas{margin-right:9px}.modal-dialog.cascading-modal .modal-header .social-buttons{margin-top:1.5rem}.modal-dialog.cascading-modal .modal-header .social-buttons a{font-size:1rem}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);display:flex;margin:-1.5rem 1rem 0}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li{flex:1}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li a{text-align:center}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{color:#616161;padding-left:2rem;padding-right:2rem}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{margin-top:1rem;text-align:center}.modal-dialog.cascading-modal.modal-avatar{margin-top:6rem}.modal-dialog.cascading-modal.modal-avatar .modal-header{box-shadow:none;margin:-6rem 0 -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{box-shadow:0 8px 17px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);margin-left:auto;margin-right:auto;width:130px}.modal-dialog.modal-notify .heading{color:#fff;font-size:1.15rem;margin:0;padding:.3rem}.modal-dialog.modal-notify .modal-header{border:0;box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)}.modal-dialog.modal-notify .close{opacity:1}.modal-dialog.modal-notify .modal-body{color:#616161;padding:1.5rem}.modal-dialog.modal-notify.modal-primary .modal-header{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .fab,.modal-dialog.modal-notify.modal-primary .far,.modal-dialog.modal-notify.modal-primary .fas{color:#4285f4}.modal-dialog.modal-notify.modal-primary .badge{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .btn .fab,.modal-dialog.modal-notify.modal-primary .btn .far,.modal-dialog.modal-notify.modal-primary .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fab,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .far,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fas{color:#4285f4}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .fab,.modal-dialog.modal-notify.modal-danger .far,.modal-dialog.modal-notify.modal-danger .fas{color:#ff3547}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .btn .fab,.modal-dialog.modal-notify.modal-danger .btn .far,.modal-dialog.modal-notify.modal-danger .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fab,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .far,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fas{color:#ff3547}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .fab,.modal-dialog.modal-notify.modal-warning .far,.modal-dialog.modal-notify.modal-warning .fas{color:#fb3}.modal-dialog.modal-notify.modal-warning .badge{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .btn .fab,.modal-dialog.modal-notify.modal-warning .btn .far,.modal-dialog.modal-notify.modal-warning .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fab,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .far,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fas{color:#fb3}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#00c851}.modal-dialog.modal-notify.modal-success .fab,.modal-dialog.modal-notify.modal-success .far,.modal-dialog.modal-notify.modal-success .fas{color:#00c851}.modal-dialog.modal-notify.modal-success .badge{background-color:#00c851}.modal-dialog.modal-notify.modal-success .btn .fab,.modal-dialog.modal-notify.modal-success .btn .far,.modal-dialog.modal-notify.modal-success .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fab,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .far,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fas{color:#00c851}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .fab,.modal-dialog.modal-notify.modal-info .far,.modal-dialog.modal-notify.modal-info .fas{color:#33b5e5}.modal-dialog.modal-notify.modal-info .badge{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .btn .fab,.modal-dialog.modal-notify.modal-info .btn .far,.modal-dialog.modal-notify.modal-info .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fab,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .far,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fas{color:#33b5e5}@media (min-width:768px){.modal-dialog.modal-top{top:0}.modal-dialog.modal-left{left:0}.modal-dialog.modal-right{right:0}.modal-dialog.modal-bottom{bottom:0}.modal-dialog.modal-top-left{left:10px;top:10px}.modal-dialog.modal-top-right{right:10px;top:10px}.modal-dialog.modal-bottom-left{bottom:10px;left:10px}.modal-dialog.modal-bottom-right{bottom:10px;right:10px}}.modal.fade.top:not(.show) .modal-dialog{transform:translate3d(0,-25%,0)}.modal.fade.left:not(.show) .modal-dialog{transform:translate3d(-25%,0,0)}.modal.fade.right:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.modal.fade.bottom:not(.show) .modal-dialog{transform:translate3d(0,25%,0)}@media (min-width:992px){.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{bottom:auto;top:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal-fluid{max-width:100%;width:100%}.modal-fluid .modal-content{width:100%}.modal-frame{margin:0!important;max-width:100%!important;position:absolute;width:100%}.modal-frame.modal-bottom{bottom:0}.modal-full-height{display:flex;height:auto;margin:0;min-height:100%;position:absolute;right:0;top:0;width:400px}.modal-full-height.modal-bottom,.modal-full-height.modal-top{display:block;height:auto;max-width:100%;width:100%}.modal-full-height.modal-top{bottom:auto}.modal-full-height.modal-bottom{min-height:0;top:auto}.modal-full-height .modal-content{width:100%}.modal-full-height.modal-lg{max-width:90%;width:90%}}@media (min-width:992px) and (min-width:992px){.modal-full-height.modal-lg{max-width:800px;width:800px}}@media (min-width:992px) and (min-width:1200px){.modal-full-height.modal-lg{max-width:1000px;width:1000px}}@media (min-width:992px){.modal-side{bottom:10px;margin:0;position:absolute;right:10px;width:400px}}"]
            },] }
];
ModalComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
ModalComponent.propDecorators = {
    class: [{ type: Input }],
    wrapperClass: [{ type: Input }],
    wrapperStyle: [{ type: Input }],
    modalClass: [{ type: Input }],
    modalStyle: [{ type: Input }],
    contentClass: [{ type: Input }],
    backdropClass: [{ type: Input }],
    backdropStyle: [{ type: Input }],
    centered: [{ type: Input }],
    isOpen: [{ type: Input }],
    size: [{ type: Input }],
    position: [{ type: Input }],
    disableBackdrop: [{ type: Input }],
    animation: [{ type: Input }],
    keyboard: [{ type: Input }],
    modalBackdrop: [{ type: ViewChild, args: ['modalBackdrop', { static: false },] }],
    modalContainer: [{ type: ViewChild, args: ['modalContainer', { static: false },] }],
    modalContainerInner: [{ type: ViewChild, args: ['modalContainerInner', { static: false },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kYWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9hcHBsZS9Eb2N1bWVudHMvcHJvamVjdHMvcHJvamVjdF9kZXZ3YXJlcy9Db250cmFzdC1Cb290c3RyYXAtQW5ndWxhci9wcm9qZWN0cy9uZy1jZGJhbmd1bGFyL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL21vZGFsL21vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsT0FBTyxFQUNQLEtBQUssRUFDTCxLQUFLLEVBQ0wsVUFBVSxFQUNWLE9BQU8sR0FDUixNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFFTCxTQUFTLEVBQ1QsVUFBVSxFQUNWLEtBQUssRUFFTCxTQUFTLEVBQ1QsU0FBUyxFQUNULGlCQUFpQixHQUNsQixNQUFNLGVBQWUsQ0FBQztBQTJFdkIsTUFBTSxPQUFPLGNBQWM7SUF5Q3pCLGlDQUFpQztJQUNqQyxzQ0FBc0M7SUFDdEMseUZBQXlGO0lBQ3pGLGlHQUFpRztJQUNqRywrQkFBK0I7SUFDL0IsNkNBQTZDO0lBQzdDLDJCQUEyQjtJQUMzQixnQ0FBZ0M7SUFDaEMsdUJBQXVCO0lBQ3ZCLDRCQUE0QjtJQUM1QiwrQ0FBK0M7SUFDL0MsOEZBQThGO0lBQzlGLDREQUE0RDtJQUM1RCwyQ0FBMkM7SUFDM0MsMEJBQTBCO0lBRTFCLFlBQW9CLEtBQWlCLEVBQVUsUUFBbUI7UUFBOUMsVUFBSyxHQUFMLEtBQUssQ0FBWTtRQUFVLGFBQVEsR0FBUixRQUFRLENBQVc7UUFyQ3pELGFBQVEsR0FBWSxLQUFLLENBQUM7UUFDMUIsV0FBTSxHQUFZLEtBQUssQ0FBQztRQUV4QixhQUFRLEdBS0YsUUFBUSxDQUFDO1FBRWYsb0JBQWUsR0FBWSxLQUFLLENBQUM7UUFDakMsY0FBUyxHQUF3QyxLQUFLLENBQUM7UUFDdkQsYUFBUSxHQUFZLElBQUksQ0FBQztJQXlCbUMsQ0FBQztJQUV0RSxRQUFRO1FBQ04sSUFB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TUFBTSxFQUFFLEtBQUssRUFBRTs2QkFDNUMsU0FBUyxTQUFDLGdCQUFnQixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtrQ0FDN0MsU0FBUyxTQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHRyaWdnZXIsXG4gIHN0YXRlLFxuICBzdHlsZSxcbiAgdHJhbnNpdGlvbixcbiAgYW5pbWF0ZSxcbn0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIElucHV0LFxuICBPbkluaXQsXG4gIFJlbmRlcmVyMixcbiAgVmlld0NoaWxkLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ0NEQk1vZGFsJyxcbiAgZXhwb3J0QXM6ICdjZGJNb2RhbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9tb2RhbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL21vZGFsLmNvbXBvbmVudC5zY3NzJ10sXG4gIGFuaW1hdGlvbnM6IFtcbiAgICB0cmlnZ2VyKCd0b3AnLCBbXG4gICAgICBzdGF0ZSgnaGlkZGVuJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xMDBweCknLCBvcGFjaXR5OiAwIH0pKSxcbiAgICAgIHN0YXRlKCd2aXNpYmxlJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDApJywgb3BhY2l0eTogMSB9KSksXG4gICAgICB0cmFuc2l0aW9uKCdoaWRkZW4gPT4gdmlzaWJsZScsIFtcbiAgICAgICAgYW5pbWF0ZShcbiAgICAgICAgICAnNTAwbXMgZWFzZScsXG4gICAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDApJywgb3BhY2l0eTogMSB9KVxuICAgICAgICApLFxuICAgICAgXSksXG4gICAgICB0cmFuc2l0aW9uKCd2aXNpYmxlID0+IGhpZGRlbicsIFtcbiAgICAgICAgYW5pbWF0ZShcbiAgICAgICAgICAnNTAwbXMgZWFzZScsXG4gICAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xMDBweCknLCBvcGFjaXR5OiAwIH0pXG4gICAgICAgICksXG4gICAgICBdKSxcbiAgICBdKSxcbiAgICB0cmlnZ2VyKCdib3R0b20nLCBbXG4gICAgICBzdGF0ZSgnaGlkZGVuJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDEwMHB4KScsIG9wYWNpdHk6IDAgfSkpLFxuICAgICAgc3RhdGUoJ3Zpc2libGUnLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCknLCBvcGFjaXR5OiAxIH0pKSxcbiAgICAgIHRyYW5zaXRpb24oJ2hpZGRlbiA9PiB2aXNpYmxlJywgW1xuICAgICAgICBhbmltYXRlKFxuICAgICAgICAgICc1MDBtcyBlYXNlJyxcbiAgICAgICAgICBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCknLCBvcGFjaXR5OiAxIH0pXG4gICAgICAgICksXG4gICAgICBdKSxcbiAgICAgIHRyYW5zaXRpb24oJ3Zpc2libGUgPT4gaGlkZGVuJywgW1xuICAgICAgICBhbmltYXRlKFxuICAgICAgICAgICc1MDBtcyBlYXNlJyxcbiAgICAgICAgICBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMTAwcHgpJywgb3BhY2l0eTogMCB9KVxuICAgICAgICApLFxuICAgICAgXSksXG4gICAgXSksXG4gICAgdHJpZ2dlcignbGVmdCcsIFtcbiAgICAgIHN0YXRlKCdoaWRkZW4nLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTEwMHB4KScsIG9wYWNpdHk6IDAgfSkpLFxuICAgICAgc3RhdGUoJ3Zpc2libGUnLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCknLCBvcGFjaXR5OiAxIH0pKSxcbiAgICAgIHRyYW5zaXRpb24oJ2hpZGRlbiA9PiB2aXNpYmxlJywgW1xuICAgICAgICBhbmltYXRlKFxuICAgICAgICAgICc1MDBtcyBlYXNlJyxcbiAgICAgICAgICBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCknLCBvcGFjaXR5OiAxIH0pXG4gICAgICAgICksXG4gICAgICBdKSxcbiAgICAgIHRyYW5zaXRpb24oJ3Zpc2libGUgPT4gaGlkZGVuJywgW1xuICAgICAgICBhbmltYXRlKFxuICAgICAgICAgICc1MDBtcyBlYXNlJyxcbiAgICAgICAgICBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTEwMHB4KScsIG9wYWNpdHk6IDAgfSlcbiAgICAgICAgKSxcbiAgICAgIF0pLFxuICAgIF0pLFxuICAgIHRyaWdnZXIoJ3JpZ2h0JywgW1xuICAgICAgc3RhdGUoJ2hpZGRlbicsIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgxMDBweCknLCBvcGFjaXR5OiAwIH0pKSxcbiAgICAgIHN0YXRlKCd2aXNpYmxlJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDApJywgb3BhY2l0eTogMSB9KSksXG4gICAgICB0cmFuc2l0aW9uKCdoaWRkZW4gPT4gdmlzaWJsZScsIFtcbiAgICAgICAgYW5pbWF0ZShcbiAgICAgICAgICAnNTAwbXMgZWFzZScsXG4gICAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDApJywgb3BhY2l0eTogMSB9KVxuICAgICAgICApLFxuICAgICAgXSksXG4gICAgICB0cmFuc2l0aW9uKCd2aXNpYmxlID0+IGhpZGRlbicsIFtcbiAgICAgICAgYW5pbWF0ZShcbiAgICAgICAgICAnNTAwbXMgZWFzZScsXG4gICAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDEwMHB4KScsIG9wYWNpdHk6IDAgfSlcbiAgICAgICAgKSxcbiAgICAgIF0pLFxuICAgIF0pLFxuICBdLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxufSlcbmV4cG9ydCBjbGFzcyBNb2RhbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XG4gIEBJbnB1dCgpIGNsYXNzOiBzdHJpbmc7XG5cbiAgLy8gU3R5bGVzIGZvciBtb2RhbCBjb250ZW50IHdvbid0IHdvcmsgYmVjYXVzZSB0aGUgYXJlIG92ZXJ3cml0dGVuIGJ5IEFuZ3VsYXIgYW5pbWF0aW9uIHRyYW5zaXRpb24gc3R5bGVzXG4gIC8vIEBJbnB1dCgpIHN0eWxlOiBzdHJpbmc7XG5cbiAgQElucHV0KCkgd3JhcHBlckNsYXNzOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHdyYXBwZXJTdHlsZTogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIG1vZGFsQ2xhc3M6IHN0cmluZztcbiAgQElucHV0KCkgbW9kYWxTdHlsZTogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIGNvbnRlbnRDbGFzczogc3RyaW5nO1xuXG4gIC8vIFN0eWxlcyBmb3IgbW9kYWwgY29udGVudCB3b24ndCB3b3JrIGJlY2F1c2UgdGhlIGFyZSBvdmVyd3JpdHRlbiBieSBBbmd1bGFyIGFuaW1hdGlvbiB0cmFuc2l0aW9uIHN0eWxlc1xuICAvLyBASW5wdXQoKSBjb250ZW50U3R5bGU6IHN0cmluZztcblxuICBASW5wdXQoKSBiYWNrZHJvcENsYXNzOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGJhY2tkcm9wU3R5bGU6IHN0cmluZztcblxuICBASW5wdXQoKSBjZW50ZXJlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBpc09wZW46IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgc2l6ZTogJ3NtJyB8ICdsZycgfCAnZmx1aWQnO1xuICBASW5wdXQoKSBwb3NpdGlvbjpcbiAgICB8ICd0b3AtcmlnaHQnXG4gICAgfCAnYm90dG9tLWxlZnQnXG4gICAgfCAndG9wLWxlZnQnXG4gICAgfCAnYm90dG9tLXJpZ2h0J1xuICAgIHwgJ2NlbnRlcicgPSAnY2VudGVyJztcblxuICBASW5wdXQoKSBkaXNhYmxlQmFja2Ryb3A6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgYW5pbWF0aW9uOiAndG9wJyB8ICdib3R0b20nIHwgJ2xlZnQnIHwgJ3JpZ2h0JyA9ICd0b3AnO1xuICBASW5wdXQoKSBrZXlib2FyZDogYm9vbGVhbiA9IHRydWU7XG5cbiAgQFZpZXdDaGlsZCgnbW9kYWxCYWNrZHJvcCcsIHsgc3RhdGljOiBmYWxzZSB9KSBtb2RhbEJhY2tkcm9wOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdtb2RhbENvbnRhaW5lcicsIHsgc3RhdGljOiBmYWxzZSB9KSBtb2RhbENvbnRhaW5lcjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnbW9kYWxDb250YWluZXJJbm5lcicsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBtb2RhbENvbnRhaW5lcklubmVyOiBFbGVtZW50UmVmO1xuXG4gIG1vZGFsQW5pbWF0aW9uU3RhdGU7XG5cbiAgLy8gQElucHV0KCkgZmFkZTogYm9vbGVhbiA9IHRydWU7XG4gIC8vIEBJbnB1dCgpIGF1dG9Gb2N1czogYm9vbGVhbiA9IHRydWU7XG4gIC8vIEBJbnB1dCgpIGJhY2tkcm9wOiBib29sZWFuID0gdHJ1ZTsgTm8gbmVlZCBmb3IgdGhpcyBzaW5jZSBkaXNhYmxlQmFja2Ryb3AgaXMgYXZhaWxhYmxlXG4gIC8vIEBJbnB1dCgpIGJhY2tkcm9wVHJhbnNpdGlvblRpbWVvdXQ6IG51bWJlciA9IDE1MCBOb3QgYXBwbGljYWJsZSBiZWNhdXNlIG9mIGFuZ3VsYXIgYW5pbWF0aW9ucztcbiAgLy8gQElucHV0KCkgY2FzY2FkaW5nOiBib29sZWFuO1xuICAvLyBASW5wdXQoKSBkaXNhYmxlRm9jdXNUcmFwOiBib29sZWFuID0gdHJ1ZTtcbiAgLy8gQElucHV0KCkgZnJhbWU6IGJvb2xlYW47XG4gIC8vIEBJbnB1dCgpIGZ1bGxIZWlnaHQ6IGJvb2xlYW47XG4gIC8vIEBJbnB1dCgpIGlkOiBzdHJpbmc7XG4gIC8vIEBJbnB1dCgpIGlubGluZTogYm9vbGVhbjtcbiAgLy8gQElucHV0KCkgbW9kYWxTdHlsZXNXaXRob3V0QmFja2Ryb3A6IG9iamVjdDtcbiAgLy8gQElucHV0KCkgbW9kYWxUcmFuc2l0aW9uVGltZW91dDogbnVtYmVyID0gMzAwOyBOb3QgYXBwbGljYWJsZSBiZWNhdXNlIG9mIGFuZ3VsYXIgYW5pbWF0aW9uc1xuICAvLyBASW5wdXQoKSBub0NsaWNrYWJsZUJvZHlXaXRob3V0QmFja2Ryb3A6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLy8gQElucHV0KCkgb3ZlcmZsb3dTY3JvbGw6IGJvb2xlYW4gPSB0cnVlO1xuICAvLyBASW5wdXQoKSBzaWRlOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxSZWY6IEVsZW1lbnRSZWYsIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMikge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmVsUmVmLm5hdGl2ZUVsZW1lbnQsICdjbGFzcycpO1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMuZWxSZWYubmF0aXZlRWxlbWVudCwgJ3N0eWxlJyk7XG5cbiAgICBpZiAodGhpcy5pc09wZW4gPT09IHRydWUpIHtcbiAgICAgIHRoaXMubW9kYWxBbmltYXRpb25TdGF0ZSA9ICd2aXNpYmxlJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb2RhbEFuaW1hdGlvblN0YXRlID0gJ2hpZGRlbic7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLmlzT3BlbiA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLm1vZGFsQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsICdkLWJsb2NrJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2VudGVyZWQgPT09IHRydWUpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoXG4gICAgICAgIHRoaXMubW9kYWxDb250YWluZXJJbm5lci5uYXRpdmVFbGVtZW50LFxuICAgICAgICAnbW9kYWwtZGlhbG9nLWNlbnRlcmVkJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoXG4gICAgICAgIHRoaXMubW9kYWxDb250YWluZXJJbm5lci5uYXRpdmVFbGVtZW50LFxuICAgICAgICAnbW9kYWwtY2VudGVyJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhcbiAgICAgICAgdGhpcy5tb2RhbENvbnRhaW5lcklubmVyLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICdtb2RhbC1zaWRlJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcC1sZWZ0Jykge1xuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhcbiAgICAgICAgdGhpcy5tb2RhbENvbnRhaW5lcklubmVyLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICdtb2RhbC10b3AtbGVmdCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucG9zaXRpb24gPT09ICd0b3AtcmlnaHQnKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKFxuICAgICAgICB0aGlzLm1vZGFsQ29udGFpbmVySW5uZXIubmF0aXZlRWxlbWVudCxcbiAgICAgICAgJ21vZGFsLXRvcC1yaWdodCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucG9zaXRpb24gPT09ICdib3R0b20tbGVmdCcpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoXG4gICAgICAgIHRoaXMubW9kYWxDb250YWluZXJJbm5lci5uYXRpdmVFbGVtZW50LFxuICAgICAgICAnbW9kYWwtYm90dG9tLWxlZnQnXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAnYm90dG9tLXJpZ2h0Jykge1xuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhcbiAgICAgICAgdGhpcy5tb2RhbENvbnRhaW5lcklubmVyLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICdtb2RhbC1ib3R0b20tcmlnaHQnXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNpemUpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoXG4gICAgICAgIHRoaXMubW9kYWxDb250YWluZXJJbm5lci5uYXRpdmVFbGVtZW50LFxuICAgICAgICBgbW9kYWwtJHt0aGlzLnNpemV9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMua2V5Ym9hcmQgPT09IHRydWUgJiYgZXZlbnQua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVNb2RhbCgpIHtcbiAgICBpZiAodGhpcy5pc09wZW4gPT09IHRydWUpIHtcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMubW9kYWxDb250YWluZXIubmF0aXZlRWxlbWVudCwgJ2QtYmxvY2snKTtcbiAgICAgIHRoaXMubW9kYWxBbmltYXRpb25TdGF0ZSA9ICd2aXNpYmxlJztcbiAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBjbG9zZU1vZGFsKCkge1xuICAgIHRoaXMubW9kYWxBbmltYXRpb25TdGF0ZSA9ICdoaWRkZW4nO1xuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5tb2RhbENvbnRhaW5lci5uYXRpdmVFbGVtZW50LCAnZC1ibG9jaycpO1xuICAgIH0sIDMwMCk7XG4gIH1cbn1cbiJdfQ==