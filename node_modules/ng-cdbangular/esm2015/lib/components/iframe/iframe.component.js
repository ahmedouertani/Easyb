import { Component, Input, ViewChild, Renderer2, ElementRef, ViewEncapsulation, } from '@angular/core';
export class IframeComponent {
    constructor(elRef, renderer) {
        this.elRef = elRef;
        this.renderer = renderer;
        this.allowfullscreen = true;
        this.title = '';
        this.stateRatio = '';
    }
    ngOnInit() {
        !(this.height || this.width) &&
            this.renderer.addClass(this.elRef.nativeElement, 'embed-responsive');
        this.renderer.addClass(this.elRef.nativeElement, 'iframe-host');
        if (this.ratio) {
            this.renderer.addClass(this.elRef.nativeElement, `embed-responsive-${this.ratio}`);
        }
        else {
            this.renderer.addClass(this.elRef.nativeElement, 'embed-responsive-16by9');
        }
        const ratio = this.ratio;
        let width = this.width;
        let height = this.height;
        let ratioNumber = 9 / 16;
        if (ratio) {
            const newRatio = parseFloat(this.ratio.split('by')[0]) /
                parseFloat(this.ratio.split('by')[1]);
            if (typeof ratioNumber === 'number') {
                ratioNumber = newRatio;
            }
        }
        if (width && !height) {
            height = width * ratioNumber;
        }
        else if (height && !width) {
            width = height * (1 / ratioNumber);
        }
        this.stateHeight = height;
        this.stateWidth = width;
        this.stateRatio = ratio;
    }
    ngAfterViewInit() {
        let iframeAttributes = {
            src: this.src,
            id: this.id || false,
            frameBorder: '0',
            target: '_parent',
            ratio: this.stateRatio || '4by3',
            height: this.stateHeight || '100%',
            name: this.name || undefined,
            width: this.stateWidth || '100%',
            onLoad: this.onLoad || undefined,
            onMouseOver: this.onMouseOver || undefined,
            onMouseOut: this.onMouseOut || undefined,
            sandbox: this.sandbox || undefined,
        };
        const returnAttributes = (attributes) => {
            const newAttributesObject = Object.keys(attributes).reduce((previousValue, currentElement) => {
                if (attributes[currentElement]) {
                    previousValue[currentElement] = attributes[currentElement];
                }
                return previousValue;
            }, {});
            return newAttributesObject;
        };
        this.iframeAttributes = returnAttributes(iframeAttributes);
        Object.keys(this.iframeAttributes).forEach((attribute) => {
            this.renderer.setAttribute(this.iframe.nativeElement, attribute, this.iframeAttributes[attribute]);
        });
    }
}
IframeComponent.decorators = [
    { type: Component, args: [{
                selector: 'CDBIframe',
                template: "<iframe #iframe class=\"embed-responsive-item\" [attr.allow]=\"allowfullscreen ? 'fullscreen' : null\" [title]=\"title\">\n</iframe>",
                encapsulation: ViewEncapsulation.None,
                styles: [".iframe-host{position:relative}.iframe-host embed,.iframe-host iframe,.iframe-host object,.iframe-host video{border:0;bottom:0;left:0;margin:0 auto;position:absolute;top:0}"]
            },] }
];
IframeComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
IframeComponent.propDecorators = {
    iframe: [{ type: ViewChild, args: ['iframe', { static: false },] }],
    allowfullscreen: [{ type: Input }],
    id: [{ type: Input }],
    name: [{ type: Input }],
    onMouseOver: [{ type: Input }],
    onMouseOut: [{ type: Input }],
    onLoad: [{ type: Input }],
    sandbox: [{ type: Input }],
    src: [{ type: Input }],
    style: [{ type: Input }],
    title: [{ type: Input }],
    ratio: [{ type: Input }],
    height: [{ type: Input }],
    width: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWZyYW1lLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvYXBwbGUvRG9jdW1lbnRzL3Byb2plY3RzL3Byb2plY3RfZGV2d2FyZXMvQ29udHJhc3QtQm9vdHN0cmFwLUFuZ3VsYXIvcHJvamVjdHMvbmctY2RiYW5ndWxhci9zcmMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9pZnJhbWUvaWZyYW1lLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUVULEtBQUssRUFDTCxTQUFTLEVBRVQsU0FBUyxFQUNULFVBQVUsRUFFVixpQkFBaUIsR0FDbEIsTUFBTSxlQUFlLENBQUM7QUFRdkIsTUFBTSxPQUFPLGVBQWU7SUFzQjFCLFlBQW9CLEtBQWlCLEVBQVUsUUFBbUI7UUFBOUMsVUFBSyxHQUFMLEtBQUssQ0FBWTtRQUFVLGFBQVEsR0FBUixRQUFRLENBQVc7UUFuQnpELG9CQUFlLEdBQVksSUFBSSxDQUFDO1FBU2hDLFVBQUssR0FBVyxFQUFFLENBQUM7UUFRNUIsZUFBVSxHQUFXLEVBQUUsQ0FBQztJQUU2QyxDQUFDO0lBRXRFLFFBQVE7UUFDTixDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQzFCLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLGtCQUFrQixDQUFDLENBQUM7UUFDdkUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFFaEUsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUN4QixvQkFBb0IsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUNqQyxDQUFDO1NBQ0g7YUFB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Q0FDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQ3pCLFNBQVMsRUFDVCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQ2pDLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7OztZQTVHRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLFdBQVc7Z0JBQ3JCLGdKQUFzQztnQkFFdEMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7O2FBQ3RDOzs7WUFWQyxVQUFVO1lBRFYsU0FBUzs7O3FCQWFSLFNBQVMsU0FBQyxRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOzhCQUVyQyxLQUFLO2lCQUNMLEtBQUs7bUJBQ0wsS0FBSzswQkFDTCxLQUFLO3lCQUNMLEtBQUs7cUJBQ0wsS0FBSztzQkFDTCxLQUFLO2tCQUNMLEtBQUs7b0JBQ0wsS0FBSztvQkFDTCxLQUFLO29CQUNMLEtBQUs7cUJBQ0wsS0FBSztvQkFDTCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBPbkluaXQsXG4gIElucHV0LFxuICBWaWV3Q2hpbGQsXG4gIEFmdGVyVmlld0luaXQsXG4gIFJlbmRlcmVyMixcbiAgRWxlbWVudFJlZixcbiAgT25DaGFuZ2VzLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ0NEQklmcmFtZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9pZnJhbWUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9pZnJhbWUuY29tcG9uZW50LnNjc3MnXSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbn0pXG5leHBvcnQgY2xhc3MgSWZyYW1lQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcbiAgQFZpZXdDaGlsZCgnaWZyYW1lJywgeyBzdGF0aWM6IGZhbHNlIH0pIGlmcmFtZTogRWxlbWVudFJlZjtcblxuICBASW5wdXQoKSBhbGxvd2Z1bGxzY3JlZW46IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKSBpZDogc3RyaW5nO1xuICBASW5wdXQoKSBuYW1lOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG9uTW91c2VPdmVyOiBGdW5jdGlvbjtcbiAgQElucHV0KCkgb25Nb3VzZU91dDogRnVuY3Rpb247XG4gIEBJbnB1dCgpIG9uTG9hZDogRnVuY3Rpb247XG4gIEBJbnB1dCgpIHNhbmRib3g6IHN0cmluZztcbiAgQElucHV0KCkgc3JjOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHN0eWxlOiBvYmplY3Q7XG4gIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KCkgcmF0aW86IHN0cmluZztcbiAgQElucHV0KCkgaGVpZ2h0OiBudW1iZXI7XG4gIEBJbnB1dCgpIHdpZHRoOiBudW1iZXI7XG5cbiAgaWZyYW1lQXR0cmlidXRlczoge307XG4gIHN0YXRlV2lkdGg6IG51bWJlcjtcbiAgc3RhdGVIZWlnaHQ6IG51bWJlcjtcbiAgc3RhdGVSYXRpbzogc3RyaW5nID0gJyc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICEodGhpcy5oZWlnaHQgfHwgdGhpcy53aWR0aCkgJiZcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbFJlZi5uYXRpdmVFbGVtZW50LCAnZW1iZWQtcmVzcG9uc2l2ZScpO1xuICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbFJlZi5uYXRpdmVFbGVtZW50LCAnaWZyYW1lLWhvc3QnKTtcblxuICAgIGlmICh0aGlzLnJhdGlvKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKFxuICAgICAgICB0aGlzLmVsUmVmLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgIGBlbWJlZC1yZXNwb25zaXZlLSR7dGhpcy5yYXRpb31gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKFxuICAgICAgICB0aGlzLmVsUmVmLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICdlbWJlZC1yZXNwb25zaXZlLTE2Ynk5J1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCByYXRpbyA9IHRoaXMucmF0aW87XG4gICAgbGV0IHdpZHRoID0gdGhpcy53aWR0aDtcbiAgICBsZXQgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgbGV0IHJhdGlvTnVtYmVyID0gOSAvIDE2O1xuXG4gICAgaWYgKHJhdGlvKSB7XG4gICAgICBjb25zdCBuZXdSYXRpbzogbnVtYmVyID1cbiAgICAgICAgcGFyc2VGbG9hdCh0aGlzLnJhdGlvLnNwbGl0KCdieScpWzBdKSAvXG4gICAgICAgIHBhcnNlRmxvYXQodGhpcy5yYXRpby5zcGxpdCgnYnknKVsxXSk7XG4gICAgICBpZiAodHlwZW9mIHJhdGlvTnVtYmVyID09PSAnbnVtYmVyJykge1xuICAgICAgICByYXRpb051bWJlciA9IG5ld1JhdGlvO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3aWR0aCAmJiAhaGVpZ2h0KSB7XG4gICAgICBoZWlnaHQgPSB3aWR0aCAqIHJhdGlvTnVtYmVyO1xuICAgIH0gZWxzZSBpZiAoaGVpZ2h0ICYmICF3aWR0aCkge1xuICAgICAgd2lkdGggPSBoZWlnaHQgKiAoMSAvIHJhdGlvTnVtYmVyKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlSGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuc3RhdGVXaWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuc3RhdGVSYXRpbyA9IHJhdGlvO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGxldCBpZnJhbWVBdHRyaWJ1dGVzOiB7fSA9IHtcbiAgICAgIHNyYzogdGhpcy5zcmMsXG4gICAgICBpZDogdGhpcy5pZCB8fCBmYWxzZSxcbiAgICAgIGZyYW1lQm9yZGVyOiAnMCcsXG4gICAgICB0YXJnZXQ6ICdfcGFyZW50JyxcbiAgICAgIHJhdGlvOiB0aGlzLnN0YXRlUmF0aW8gfHwgJzRieTMnLFxuICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlSGVpZ2h0IHx8ICcxMDAlJyxcbiAgICAgIG5hbWU6IHRoaXMubmFtZSB8fCB1bmRlZmluZWQsXG4gICAgICB3aWR0aDogdGhpcy5zdGF0ZVdpZHRoIHx8ICcxMDAlJyxcbiAgICAgIG9uTG9hZDogdGhpcy5vbkxvYWQgfHwgdW5kZWZpbmVkLFxuICAgICAgb25Nb3VzZU92ZXI6IHRoaXMub25Nb3VzZU92ZXIgfHwgdW5kZWZpbmVkLFxuICAgICAgb25Nb3VzZU91dDogdGhpcy5vbk1vdXNlT3V0IHx8IHVuZGVmaW5lZCxcbiAgICAgIHNhbmRib3g6IHRoaXMuc2FuZGJveCB8fCB1bmRlZmluZWQsXG4gICAgfTtcbiAgICBjb25zdCByZXR1cm5BdHRyaWJ1dGVzID0gKGF0dHJpYnV0ZXMpID0+IHtcbiAgICAgIGNvbnN0IG5ld0F0dHJpYnV0ZXNPYmplY3QgPSBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5yZWR1Y2UoXG4gICAgICAgIChwcmV2aW91c1ZhbHVlLCBjdXJyZW50RWxlbWVudCkgPT4ge1xuICAgICAgICAgIGlmIChhdHRyaWJ1dGVzW2N1cnJlbnRFbGVtZW50XSkge1xuICAgICAgICAgICAgcHJldmlvdXNWYWx1ZVtjdXJyZW50RWxlbWVudF0gPSBhdHRyaWJ1dGVzW2N1cnJlbnRFbGVtZW50XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHByZXZpb3VzVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHt9XG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ld0F0dHJpYnV0ZXNPYmplY3Q7XG4gICAgfTtcbiAgICB0aGlzLmlmcmFtZUF0dHJpYnV0ZXMgPSByZXR1cm5BdHRyaWJ1dGVzKGlmcmFtZUF0dHJpYnV0ZXMpO1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5pZnJhbWVBdHRyaWJ1dGVzKS5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKFxuICAgICAgICB0aGlzLmlmcmFtZS5uYXRpdmVFbGVtZW50LFxuICAgICAgICBhdHRyaWJ1dGUsXG4gICAgICAgIHRoaXMuaWZyYW1lQXR0cmlidXRlc1thdHRyaWJ1dGVdXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59XG4iXX0=